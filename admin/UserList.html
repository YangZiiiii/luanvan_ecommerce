<!DOCTYPE html>
<!-- saved from url=(0117)https://demos.themeselection.com/materio-bootstrap-html-admin-template/html/vertical-menu-template/app-user-list.html -->
<html lang="en" class="layout-navbar-fixed layout-compact dark-style layout-menu-fixed" dir="ltr"
   data-theme="theme-default" data-assets-path="../../assets/" data-template="vertical-menu-template" data-style="dark">
<script async="" src="./assets/js/gtm.js"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/content/location/location.js"
   id="eppiocemhmnlbhjplcgkofciiegomcon"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/extend-native-history-api.js"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/requests.js"></script>

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

   <meta name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

   <title>
      User List - Pages | Materio - Bootstrap Material Design Admin Template
   </title>

   <meta name="description" content="Start your development with a Dashboard for Bootstrap 5" />
   <meta name="keywords"
      content="dashboard, material, material design, bootstrap 5 dashboard, bootstrap 5 design, bootstrap 5" />
   <!-- Canonical SEO -->
   <link rel="canonical" href="https://themeselection.com/item/materio-bootstrap-html-admin-template/" />


   <!-- Favicon -->
   <link rel="icon" type="image/x-icon"
      href="https://demos.themeselection.com/materio-bootstrap-html-admin-template/assets/img/favicon/favicon.ico" />

   <!-- Fonts -->
   <link rel="preconnect" href="https://fonts.googleapis.com/" />
   <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
   <link href="./UserList/css2" rel="stylesheet" />

   <!-- Icons -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
   <link rel="stylesheet" href="./assets/css/remixicon.css" />
   <link rel="stylesheet" href="./assets/css/flag-icons.css" />

   <!-- Menu waves for no-customizer fix -->
   <link rel="stylesheet" href="./assets/css/node-waves.css" />

   <!-- Core CSS -->

   <link rel="stylesheet" href="./assets/css/demo.css" />

   <!-- Vendors CSS -->
   <link rel="stylesheet" href="./assets/css/perfect-scrollbar.css" />
   <link rel="stylesheet" href="./assets/css/typeahead.css" />
   <link rel="stylesheet" href="./assets/css/datatables.bootstrap5.css" />
   <link rel="stylesheet" href="./assets/css/responsive.bootstrap5.css" />
   <link rel="stylesheet" href="./assets/css/buttons.bootstrap5.css" />
   <link rel="stylesheet" href="./assets/css/datatables.checkboxes.css" />
   <link rel="stylesheet" href="./assets/css/select2.css" />
   <link rel="stylesheet" href="./assets/css/form-validation.css" />

   <!-- Page CSS -->

   <!-- Helpers -->
   <script src="./assets/js/helpers.js"></script>


   <!-- Template Navigation -->
   <script src="./assets/js/template/navigation.js"></script>

   <!-- Template NabBar -->
   <script src="./assets/js/template/navbar.js"></script>


   <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
   <script src="./assets/js/config.js"></script>
   <link rel="stylesheet" type="text/css" href="./assets/css/core-dark.css" class="template-customizer-core-css" />
   <link rel="stylesheet" type="text/css" href="./assets/css/theme-semi-dark-dark.css"
      class="template-customizer-theme-css" />


</head>

<body
   bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4yMCIsInNjb3JlIjoyMDAyMH1d"
   __processed_2b3b2778-9ce8-4422-bb04-c6613e7840fc__="true">


   <!-- Layout wrapper -->
   <div class="layout-wrapper layout-content-navbar" bis_skin_checked="1">
      <div class="layout-container" bis_skin_checked="1">
         <!-- Menu -->

         <navigation-main></navigation-main>
         <!-- / Menu -->

         <!-- Layout container -->
         <div class="layout-page" bis_skin_checked="1">
            <!-- Navbar -->

            <navbar-main></navbar-main>
            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper" bis_skin_checked="1">
               <!-- Content -->

               <div class="container-xxl flex-grow-1 container-p-y" bis_skin_checked="1">
                  <!-- <div class="row g-6 mb-6" bis_skin_checked="1">
                     <div class="col-sm-6 col-xl-3" bis_skin_checked="1">
                        <div class="card" bis_skin_checked="1">
                           <div class="card-body" bis_skin_checked="1">
                              <div class="d-flex justify-content-between" bis_skin_checked="1">
                                 <div class="me-1" bis_skin_checked="1">
                                    <p class="text-heading mb-1">Session</p>
                                    <div class="d-flex align-items-center" bis_skin_checked="1">
                                       <h4 class="mb-1 me-2">21,459</h4>
                                       <p class="text-success mb-1">
                                          (+29%)
                                       </p>
                                    </div>
                                    <small class="mb-0">Total Users</small>
                                 </div>
                                 <div class="avatar" bis_skin_checked="1">
                                    <div class="avatar-initial bg-label-primary rounded" bis_skin_checked="1">
                                       <div class="ri-group-line ri-26px" bis_skin_checked="1"></div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-sm-6 col-xl-3" bis_skin_checked="1">
                        <div class="card" bis_skin_checked="1">
                           <div class="card-body" bis_skin_checked="1">
                              <div class="d-flex justify-content-between" bis_skin_checked="1">
                                 <div class="me-1" bis_skin_checked="1">
                                    <p class="text-heading mb-1">
                                       Paid Users
                                    </p>
                                    <div class="d-flex align-items-center" bis_skin_checked="1">
                                       <h4 class="mb-1 me-2">4,567</h4>
                                       <p class="text-success mb-1">
                                          (+18%)
                                       </p>
                                    </div>
                                    <small class="mb-0">Last week analytics</small>
                                 </div>
                                 <div class="avatar" bis_skin_checked="1">
                                    <div class="avatar-initial bg-label-danger rounded" bis_skin_checked="1">
                                       <div class="ri-user-add-line ri-26px scaleX-n1" bis_skin_checked="1"></div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-sm-6 col-xl-3" bis_skin_checked="1">
                        <div class="card" bis_skin_checked="1">
                           <div class="card-body" bis_skin_checked="1">
                              <div class="d-flex justify-content-between" bis_skin_checked="1">
                                 <div class="me-1" bis_skin_checked="1">
                                    <p class="text-heading mb-1">
                                       Active Users
                                    </p>
                                    <div class="d-flex align-items-center" bis_skin_checked="1">
                                       <h4 class="mb-1 me-2">19,860</h4>
                                       <p class="text-danger mb-1">(-14%)</p>
                                    </div>
                                    <small class="mb-0">Last week analytics</small>
                                 </div>
                                 <div class="avatar" bis_skin_checked="1">
                                    <div class="avatar-initial bg-label-success rounded" bis_skin_checked="1">
                                       <div class="ri-user-follow-line ri-26px" bis_skin_checked="1"></div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class="col-sm-6 col-xl-3" bis_skin_checked="1">
                        <div class="card" bis_skin_checked="1">
                           <div class="card-body" bis_skin_checked="1">
                              <div class="d-flex justify-content-between" bis_skin_checked="1">
                                 <div class="me-1" bis_skin_checked="1">
                                    <p class="text-heading mb-1">
                                       Pending Users
                                    </p>
                                    <div class="d-flex align-items-center" bis_skin_checked="1">
                                       <h4 class="mb-1 me-2">237</h4>
                                       <p class="text-success mb-1">
                                          (+42%)
                                       </p>
                                    </div>
                                    <small class="mb-0">Last week analytics</small>
                                 </div>
                                 <div class="avatar" bis_skin_checked="1">
                                    <div class="avatar-initial bg-label-warning rounded" bis_skin_checked="1">
                                       <div class="ri-user-search-line ri-26px" bis_skin_checked="1"></div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div> -->
                  <!-- Users List Table -->
                  <div class="card" bis_skin_checked="1">
                     <!-- <div class="card-header border-bottom" bis_skin_checked="1">
                        <h6 class="card-title mb-0">Filters</h6>
                        <div class="d-flex justify-content-between align-items-center row pt-4 pb-2 gap-4 gap-md-0 gx-5"
                           bis_skin_checked="1">
                           <div class="col-md-4 user_role" bis_skin_checked="1">
                              <select id="UserRole" class="form-select text-capitalize">
                                 <option value="">Select Role</option>
                                 <option value="Admin">Admin</option>
                                 <option value="Author">Author</option>
                                 <option value="Editor">Editor</option>
                                 <option value="Maintainer">
                                    Maintainer
                                 </option>
                                 <option value="Subscriber">
                                    Subscriber
                                 </option>
                              </select>
                           </div>
                           <div class="col-md-4 user_plan" bis_skin_checked="1">
                              <select id="UserPlan" class="form-select text-capitalize">
                                 <option value="">Select Plan</option>
                                 <option value="Basic">Basic</option>
                                 <option value="Company">Company</option>
                                 <option value="Enterprise">
                                    Enterprise
                                 </option>
                                 <option value="Team">Team</option>
                              </select>
                           </div>
                           <div class="col-md-4 user_status" bis_skin_checked="1">
                              <select id="FilterTransaction" class="form-select text-capitalize">
                                 <option value="">Select Status</option>
                                 <option value="Pending" class="text-capitalize">
                                    Pending
                                 </option>
                                 <option value="Active" class="text-capitalize">
                                    Active
                                 </option>
                                 <option value="Inactive" class="text-capitalize">
                                    Inactive
                                 </option>
                              </select>
                           </div>
                        </div>
                     </div> -->
                     <div class="card-datatable table-responsive" bis_skin_checked="1">
                        <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer"
                           bis_skin_checked="1">
                           <!-- <div class="row mx-1" bis_skin_checked="1">
                              <div
                                 class="col-md-2 d-flex align-items-center justify-content-md-start justify-content-center ps-4"
                                 bis_skin_checked="1">
                                 <div class="dt-action-buttons mt-4 mt-md-0" bis_skin_checked="1">
                                    <div class="dt-buttons btn-group flex-wrap" bis_skin_checked="1">
                                       <div class="btn-group" bis_skin_checked="1">
                                          <button
                                             class="btn btn-secondary buttons-collection dropdown-toggle btn-outline-secondary me-4 waves-effect waves-light"
                                             tabindex="0" aria-controls="DataTables_Table_0" type="button"
                                             aria-haspopup="dialog" aria-expanded="false">
                                             <span><i class="ri-download-line ri-16px me-1"></i>
                                                <span class="d-none d-sm-inline-block">Export</span></span>
                                          </button>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                              <div class="col-md-10" bis_skin_checked="1">
                                 <div class="d-flex align-items-center justify-content-md-end justify-content-center"
                                    bis_skin_checked="1">
                                    <div class="me-4" bis_skin_checked="1">
                                       <div id="DataTables_Table_0_filter" class="dataTables_filter"
                                          bis_skin_checked="1">
                                          <label><input type="search" class="form-control form-control-sm"
                                                placeholder="Search User" aria-controls="DataTables_Table_0" /></label>
                                       </div>
                                    </div>
                                    <div class="add-new" bis_skin_checked="1">
                                       <button class="btn btn-primary waves-effect waves-light"
                                          data-bs-toggle="offcanvas" data-bs-target="#offcanvasAddUser">
                                          <i class="ri-add-line me-0 me-sm-1 d-inline-block d-sm-none"></i><span
                                             class="d-none d-sm-inline-block">
                                             Add New User
                                          </span>
                                       </button>
                                    </div>
                                 </div>
                              </div>
                           </div> -->
                           <table class="table dataTable no-footer dtr-column" id="DataTables_Table_0"
                              aria-describedby="DataTables_Table_0_info" style="width: 1394px">
                              <thead>
                                 <tr>
                                    <th class="control sorting_disabled dtr-hidden" rowspan="1" colspan="1"
                                       style="width: 0px; display: none" aria-label=""></th>
                                    <th class="sorting_disabled dt-checkboxes-cell dt-checkboxes-select-all" rowspan="1"
                                       colspan="1" style="width: 18px" data-col="1" aria-label="">
                                     
                                    </th>
                                    <th class="sorting sorting_desc" tabindex="0" aria-controls="DataTables_Table_0"
                                       rowspan="1" colspan="1" style="width: 272px"
                                       aria-label="User: activate to sort column ascending" aria-sort="descending">
                                       User
                                    </th>
                                    <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1"
                                       colspan="1" style="width: 315px"
                                       aria-label="Email: activate to sort column ascending">
                                       Email
                                    </th>
                                    <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1"
                                       colspan="1" style="width: 140px"
                                       aria-label="Role: activate to sort column ascending">
                                       Role
                                    </th>
                                   
                                    <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1"
                                       colspan="1" style="width: 99px"
                                       aria-label="Status: activate to sort column ascending">
                                       Status
                                    </th>
                                   
                                 </tr>
                              </thead>
                              <tbody>
                                 <script>
                                    fetch('http://localhost:8080/api/v1/user')
                                       .then(response => response.json())
                                       .then(data => {
                                          const tableBody = document.querySelector('#DataTables_Table_0 tbody');
                                          tableBody.innerHTML = '';

                                          // Sắp xếp: admin lên đầu
                                          data.sort((a, b) => {
                                             const roleA = (a.role || '').toLowerCase();
                                             const roleB = (b.role || '').toLowerCase();
                                             if (roleA === 'admin' && roleB !== 'admin') return -1;
                                             if (roleA !== 'admin' && roleB === 'admin') return 1;
                                             return 0;
                                          });

                                          // Status options config
                                          const statusOptions = [
                                             { value: 'ACTIVE', text: 'Active', class: 'bg-label-success text-success' },
                                             { value: 'LOCKED', text: 'Locked', class: 'bg-label-danger text-danger' }
                                          ];

                                          data.forEach(user => {
                                             // Chọn icon theo role
                                             let roleIcon = '';
                                             if ((user.role || '').toLowerCase() === 'admin') {
                                                roleIcon = '<i class="ri-shield-user-line ri-22px text-danger me-2"></i>';
                                             } else {
                                                roleIcon = '<i class="ri-user-line ri-22px text-primary me-2"></i>';
                                             }

                                             // Status dropdown
                                             let currentStatus = statusOptions.find(opt => opt.value === user.status) || statusOptions[0];
                                             let statusDropdown = `
                                                <div class="dropdown">
                                                   <button class="btn btn-sm dropdown-toggle ${currentStatus.class}" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                      ${currentStatus.text}
                                                   </button>
                                                   <ul class="dropdown-menu">
                                                      ${statusOptions.map(opt => `
                                                         <li>
                                                            <a class="dropdown-item${opt.value === user.status ? ' active' : ''}" href="#" data-uid="${user.uid}" data-value="${opt.value}">
                                                               <span class="badge px-2 rounded-pill ${opt.class}" style="text-transform:capitalize;">${opt.text}</span>
                                                            </a>
                                                         </li>
                                                      `).join('')}
                                                   </ul>
                                                </div>
                                             `;

                                             const row = `
                                                <tr>
                                                   <td class="control" tabindex="0" style="display: none"></td>
                                                   <td class="dt-checkboxes-cell">
                                                     
                                                   </td>
                                                   <td class="sorting_1">
                                                      <div class="d-flex justify-content-start align-items-center user-name">
                                                         <div class="avatar-wrapper">
                                                            <div class="avatar avatar-sm me-4">
                                                               <img src="${user.avatarUrl || './assets/img/UserList/default-avatar.jpg'}" alt="Avatar" class="rounded-circle" />
                                                            </div>
                                                         </div>
                                                         <div class="d-flex flex-column">
                                                            <a href="javascript:;" class="text-heading text-truncate">
                                                               <span class="fw-medium">${user.firstName} ${user.lastName}</span>
                                                            </a>
                                                            <small>@${user.uid || 'unknown'}</small>
                                                         </div>
                                                      </div>
                                                   </td>
                                                   <td>
                                                      <span>${user.email}</span>
                                                   </td>
                                                   <td>
                                                      <span class="text-truncate d-flex align-items-center text-heading">
                                                         ${roleIcon}${user.role || 'User'}</span>
                                                      </span>
                                                   </td>
                                                   
                                                   <td>
                                                      ${statusDropdown}
                                                   </td>
                                                </tr>
                                             `;
                                             tableBody.insertAdjacentHTML('beforeend', row);
                                          });

                                          // Add event listeners for status dropdown
                                          tableBody.querySelectorAll('.dropdown-item').forEach(item => {
                                             item.addEventListener('click', function (e) {
                                                e.preventDefault();
                                                const uid = this.getAttribute('data-uid');
                                                const value = this.getAttribute('data-value');
                                                fetch(`http://localhost:8080/api/v1/user/lock/${uid}`, {
                                                   method: 'PUT',
                                                   headers: {
                                                      'Content-Type': 'application/json'
                                                   },
                                                   body: JSON.stringify({ status: value })
                                                })
                                                .then(res => {
                                                   if (!res.ok) throw new Error('Failed to update status');
                                                   location.reload();
                                                })
                                                .catch(error => {
                                                   alert('Error updating status');
                                                });
                                             });
                                          });
                                       })
                                       .catch(error => console.error('Error fetching user data:', error));
                                 </script>
                              </tbody>
                           </table>
                           
                           <div bis_skin_checked="1" style="width: 1%"></div>
                        </div>
                     </div>
                     <!-- Offcanvas to add new user -->
                     
                  </div>
               </div>
               <!-- / Content -->

               <!-- Footer -->
               <footer class="content-footer footer bg-footer-theme">
                  <div class="container-xxl" bis_skin_checked="1">
                     <div
                        class="footer-container d-flex align-items-center justify-content-between py-4 flex-md-row flex-column"
                        bis_skin_checked="1">
                        <div class="text-body mb-2 mb-md-0" bis_skin_checked="1">
                           ©
                           <script>
                              document.write(new Date().getFullYear());
                           </script>
                           2025, made with
                           <span class="text-danger"><i class="tf-icons ri-heart-fill"></i></span>
                           by
                           <a href="#!" target="_blank" class="footer-link">COZA STORE</a>
                        </div>
                        <!-- <div class="d-none d-lg-inline-block" bis_skin_checked="1">
                           <a href="https://themeselection.com/license/" class="footer-link me-4"
                              target="_blank">License</a>
                           <a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More
                              Themes</a>

                           <a href="https://demos.themeselection.com/materio-bootstrap-html-admin-template/documentation/"
                              target="_blank" class="footer-link me-4">Documentation</a>

                           <a href="https://themeselection.com/support/" target="_blank"
                              class="footer-link d-none d-sm-inline-block">Support</a>
                        </div> -->
                     </div>
                  </div>
               </footer>
               <!-- / Footer -->

               <div class="content-backdrop fade" bis_skin_checked="1"></div>
            </div>
            <!-- Content wrapper -->
         </div>
         <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle" bis_skin_checked="1"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target" style="
               touch-action: pan-y;
               user-select: none;
               -webkit-user-drag: none;
               -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            " bis_skin_checked="1"></div>
   </div>
   <!-- / Layout wrapper -->


   <!-- Core JS -->
   <!-- build:js assets/vendor/js/core.js -->
   <script src="./assets/js/jquery.js"></script>
   <script src="./assets/js/popper.js"></script>
   <script src="./assets/js/bootstrap.js"></script>
   <script src="./assets/js/node-waves.js"></script>
   <script src="./assets/js/perfect-scrollbar.js"></script>
   <script type="text/javascript" id="" charset="">
      console.log("TS:GTM Worked");
   </script>
   <script src="./assets/js/hammer.js"></script>
   <script src="./assets/js/i18n.js"></script>
   <script src="./assets/js/typeahead.js"></script>
   <script src="./assets/js/menu.js"></script>

   <!-- endbuild -->

   <!-- Vendors JS -->
   <script src="./assets/js/moment.js"></script>
   <script src="./assets/js/datatables-bootstrap5.js"></script>
   <script src="./assets/js/select2.js"></script>
   <script src="./assets/js/popular.js"></script>
   <script src="./assets/js/bootstrap5.js"></script>
   <script src="./assets/js/auto-focus.js"></script>
   <script src="./assets/js/cleave.js"></script>
   <script src="./assets/js/cleave-phone.js"></script>

   <!-- Main JS -->
   <script src="./assets/js/main.js"></script>

   <!-- Page JS -->
   <script src="./assets/js/UserList/app-user-list.js"></script>



</body>

</html>