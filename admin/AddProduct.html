<!DOCTYPE html>
<!-- saved from url=(0129)https://demos.themeselection.com/materio-bootstrap-html-admin-template/html/vertical-menu-template/app-ecommerce-product-add.html -->
<html lang="en" class="layout-navbar-fixed layout-compact dark-style layout-menu-fixed" dir="ltr"
   data-theme="theme-default" data-assets-path="../../assets/" data-template="vertical-menu-template" data-style="dark">
<script async="" src="./assets/js/gtm.js"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/content/location/location.js"
   id="eppiocemhmnlbhjplcgkofciiegomcon"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/extend-native-history-api.js"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/requests.js"></script>

<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

   <meta name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

   <title>
      eCommerce Add Product - Apps | Materio - Bootstrap Material Design
      Admin Template
   </title>

   <meta name="description" content="Start your development with a Dashboard for Bootstrap 5" />
   <meta name="keywords"
      content="dashboard, material, material design, bootstrap 5 dashboard, bootstrap 5 design, bootstrap 5" />
   <!-- Canonical SEO -->
   <link rel="canonical" href="https://themeselection.com/item/materio-bootstrap-html-admin-template/" />


   <!-- Favicon -->
   <link rel="icon" type="image/x-icon"
      href="https://demos.themeselection.com/materio-bootstrap-html-admin-template/assets/img/favicon/favicon.ico" />

   <!-- Fonts -->
   <link rel="preconnect" href="https://fonts.googleapis.com/" />
   <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
   <link href="./assets/css/css2.css" rel="stylesheet" />

   <!-- Icons -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
   <link rel="stylesheet" href="./assets/css/remixicon.css" />
   <link rel="stylesheet" href="./assets/css/flag-icons.css" />

   <!-- Menu waves for no-customizer fix -->
   <link rel="stylesheet" href="./assets/css/node-waves.css" />

   <!-- Core CSS -->

   <link rel="stylesheet" href="./assets/css/demo.css" />

   <!-- Vendors CSS -->
   <link rel="stylesheet" href="./assets/css/perfect-scrollbar.css" />
   <link rel="stylesheet" href="./assets/css/typeahead.css" />
   <link rel="stylesheet" href="./assets/css/typography.css" />
   <link rel="stylesheet" href="./assets/css/katex.css" />
   <link rel="stylesheet" href="./assets/css/editor.css" />
   <link rel="stylesheet" href="./assets/css/select2.css" />
   <link rel="stylesheet" href="./assets/css/dropzone.css" />
   <link rel="stylesheet" href="./assets/css/flatpickr.css" />
   <link rel="stylesheet" href="./assets/css/tagify.css" />

   <!-- Page CSS -->

   <!-- Helpers -->
   <script src="./assets/js/helpers.js"></script>


   <!-- Template Navigation -->
   <script src="./assets/js/ProducList/navigation.js"></script>

   <!-- Template NabBar -->
   <script src="./assets/js/template/navbar.js"></script>

   <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
   <script src="./assets/js/config.js"></script>
   <link rel="stylesheet" type="text/css" href="./assets/css/core-dark.css" class="template-customizer-core-css" />
   <link rel="stylesheet" type="text/css" href="./assets/css/theme-semi-dark-dark.css"
      class="template-customizer-theme-css" />

 
   <link rel="stylesheet" href="./assets/css/api.min.css" id="omapi-css" media="all" />
</head>

<body __processed_bb539775-74b8-4236-b43d-afe4400b922e__="true"
   bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJMSU5LRURJTiI6ImRpc2FibGVkIiwiQ09ORklHIjoiZGlzYWJsZWQifSwidmVyc2lvbiI6IjIuMC4yMCIsInNjb3JlIjoyMDAyMH1d">


   <!-- Layout wrapper -->
   <div class="layout-wrapper layout-content-navbar" bis_skin_checked="1">
      <div class="layout-container" bis_skin_checked="1">
         <!-- Menu -->

         <navigation-main></navigation-main>
         <!-- / Menu -->

         <!-- Layout container -->
         <div class="layout-page" bis_skin_checked="1">

            <!-- Navbar -->
            <navbar-main></navbar-main>
            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper" bis_skin_checked="1">
               <!-- Content -->

               <div class="container-xxl flex-grow-1 container-p-y" bis_skin_checked="1">
                  <div class="app-ecommerce" bis_skin_checked="1">
                     <!-- Add Product -->
                     <div
                        class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-6 gap-4 gap-md-0"
                        bis_skin_checked="1">
                        <div class="d-flex flex-column justify-content-center" bis_skin_checked="1">
                           <h4 class="mb-1">Add a new Product</h4>
                           <p class="mb-0">
                              Orders placed across your store
                           </p>
                        </div>
                        <div class="d-flex align-content-center flex-wrap gap-4" bis_skin_checked="1">
                           <button class="btn btn-outline-secondary waves-effect">
                              Discard
                           </button>
                           <button type="submit" class="btn btn-primary waves-effect waves-light">
                              Publish product
                           </button>
                        </div>
                     </div>

                     <div class="row" bis_skin_checked="1">
                        <!-- First column-->
                        <div class="col-12 col-lg-8" bis_skin_checked="1">
                           <!-- Product Information -->
                           <div class="card mb-6" bis_skin_checked="1">
                              <div class="card-header" bis_skin_checked="1">
                                 <h5 class="card-tile mb-0">
                                    Product information
                                 </h5>
                              </div>
                              <div class="card-body add-info__product" bis_skin_checked="1">
                                 <div class="form-floating form-floating-outline mb-5" bis_skin_checked="1">
                                    <input type="text" class="form-control" id="ecommerce-product-name"
                                       placeholder="Product title" name="productTitle" aria-label="Product title" />
                                    <label for="ecommerce-product-name">Name</label>
                                 </div>

                                 <div class="row gx-5 mb-5" bis_skin_checked="1">
                                    <div class="col" bis_skin_checked="1">
                                       <div class="form-floating form-floating-outline" bis_skin_checked="1">
                                          <input type="text" class="form-control" id="ecommerce-product-sku"
                                             placeholder="sku" name="productSku" aria-label="Product SKU" />
                                          <label for="ecommerce-product-sku">SKU</label>
                                       </div>
                                    </div>
                                    <div class="col" bis_skin_checked="1">
                                       <div class="form-floating form-floating-outline" bis_skin_checked="1">
                                          <input type="text" class="form-control" id="ecommerce-product-barcode"
                                             placeholder="999" name="Quantity" aria-label="Product barcode" />
                                          <label for="ecommerce-product-name">Quantity</label>
                                       </div>
                                    </div>
                                 </div>
                                 <!-- Comment -->
                                 <div bis_skin_checked="1">
                                    <label class="mb-1">Description (Optional)</label>
                                    <div class="form-control p-0 pt-1" bis_skin_checked="1">
                                       <div class="comment-toolbar border-0 border-bottom ql-toolbar ql-snow"
                                          bis_skin_checked="1">
                                          <div class="d-flex justify-content-start" bis_skin_checked="1">
                                             <span class="ql-formats me-0">
                                                <button class="ql-bold" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <path class="ql-stroke"
                                                         d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z">
                                                      </path>
                                                      <path class="ql-stroke"
                                                         d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z">
                                                      </path>
                                                   </svg>
                                                </button>
                                                <button class="ql-italic" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"></line>
                                                      <line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"></line>
                                                      <line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"></line>
                                                   </svg>
                                                </button>
                                                <button class="ql-underline" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <path class="ql-stroke"
                                                         d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3">
                                                      </path>
                                                      <rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12"
                                                         x="3" y="15"></rect>
                                                   </svg>
                                                </button>
                                                <button class="ql-list" value="ordered" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"></line>
                                                      <line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"></line>
                                                      <line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"></line>
                                                      <line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5"
                                                         y2="5.5"></line>
                                                      <path class="ql-fill"
                                                         d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z">
                                                      </path>
                                                      <path class="ql-stroke ql-thin"
                                                         d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156">
                                                      </path>
                                                      <path class="ql-stroke ql-thin"
                                                         d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109">
                                                      </path>
                                                   </svg>
                                                </button>
                                                <button class="ql-list" value="bullet" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"></line>
                                                      <line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"></line>
                                                      <line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"></line>
                                                      <line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"></line>
                                                      <line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"></line>
                                                      <line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"></line>
                                                   </svg>
                                                </button>
                                                <button class="ql-link" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"></line>
                                                      <path class="ql-even ql-stroke"
                                                         d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z">
                                                      </path>
                                                      <path class="ql-even ql-stroke"
                                                         d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z">
                                                      </path>
                                                   </svg>
                                                </button>
                                                <button class="ql-image" type="button">
                                                   <svg viewBox="0 0 18 18">
                                                      <rect class="ql-stroke" height="10" width="12" x="3" y="4"></rect>
                                                      <circle class="ql-fill" cx="6" cy="7" r="1"></circle>
                                                      <polyline class="ql-even ql-fill"
                                                         points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline>
                                                   </svg>
                                                </button>
                                             </span>
                                          </div>
                                       </div>
                                       <div class="comment-editor border-0 pb-1 ql-container ql-snow"
                                          id="ecommerce-category-description" bis_skin_checked="1">
                                          <div class="ql-editor ql-blank" data-gramm="false" contenteditable="true"
                                             data-placeholder="Product Description" bis_skin_checked="1">
                                             <p><br /></p>
                                          </div>
                                          <div class="ql-clipboard" contenteditable="true" tabindex="-1"
                                             bis_skin_checked="1"></div>
                                          <div class="ql-tooltip ql-hidden" bis_skin_checked="1">
                                             <a class="ql-preview" rel="noopener noreferrer" target="_blank"
                                                href="about:blank"></a><input type="text" data-formula="e=mc^2"
                                                data-link="https://quilljs.com" data-video="Embed URL" /><a
                                                class="ql-action"></a><a class="ql-remove"></a>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!-- /Product Information -->
                           <!-- Media -->
                           <div class="card mb-6" bis_skin_checked="1">
                              <div class="card-header d-flex justify-content-between align-items-center"
                                 bis_skin_checked="1">
                                 <h5 class="mb-0 card-title">
                                    Product Image
                                 </h5>
                                
                              </div>
                              <div class="card-body" bis_skin_checked="1">
                                 <form action="https://demos.themeselection.com/upload"
                                    class="dropzone needsclick dz-clickable" id="dropzone-basic">
                                    <div class="dz-message needsclick" bis_skin_checked="1">
                                       <div class="d-flex justify-content-center" bis_skin_checked="1">
                                          <div class="avatar avatar-md" bis_skin_checked="1">
                                             <span class="avatar-initial rounded bg-label-secondary">
                                                <i class="ri-upload-2-line ri-24px"></i>
                                             </span>
                                          </div>
                                       </div>
                                       <p class="h4 needsclick my-2">
                                          Drag and drop your image here
                                       </p>
                                       <small class="text-muted d-block fs-6 my-2">or</small>
                                       <span class="needsclick btn btn-sm btn-outline-primary waves-effect"
                                          id="btnBrowse">Browse image</span>
                                    </div>
                                 </form>
                              </div>
                           </div>
                           <!-- /Media -->
                           <!-- Variants -->
                           <div class="card mb-6">
                              <div class="card-header">
                                 <h5 class="card-title mb-0">Variants</h5>
                              </div>
                              <div class="card-body">
                                 <form class="form-repeater">
                                    <div data-repeater-list="group-a">
                                       <div data-repeater-item>
                                          <div class="row gx-5">
                                             <div class="mb-6 col-sm-4">
                                                <div class="form-floating form-floating-outline form-floating-select2">
                                                   <div class="position-relative">
                                                      <select class="select2 form-select" id="variantTypeSelect" data-placeholder="Option" data-allow-clear="true">
                                                         <option value="">Option</option>
                                                      </select>
                                                   </div>
                                                   <label>Type</label>
                                                </div>
                                             </div>
                                             <div class="mb-6 col-sm-8">
                                                <div class="form-floating form-floating-outline">
                                                   <input type="text" class="form-control" placeholder="Enter size" />
                                                   <label>Value</label>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                    <div>
                                       <button class="btn btn-primary waves-effect waves-light" data-repeater-create type="button">
                                          <i class="ri-add-line ri-16px me-1_5"></i>
                                          Add another option
                                       </button>
                                    </div>
                                 </form>
                              </div>
                           </div>

                           <script>
                              document.addEventListener("DOMContentLoaded", function () {
                                const API_URL = "http://localhost:8080/api/v1/product/variant-type";
                            
                                // Hàm fetch và render dữ liệu vào 1 select
                                function populateVariantTypeSelect(selectEl) {
                                  fetch(API_URL)
                                    .then(response => response.json())
                                    .then(data => {
                                      let options = `<option value="">Option</option>`;
                                      data.data.forEach(variant => {
                                        options += `<option value="${variant.type}">${variant.type}</option>`;
                                      });
                                      selectEl.innerHTML = options;
                                      console.log("✅ Loaded variant types for:", selectEl);
                                    })
                                    .catch(error => console.error("❌ Error fetching variant types:", error));
                                }
                            
                                // Gán dữ liệu cho select đầu tiên có sẵn
                                const initialSelect = document.querySelector("#variantTypeSelect");
                                if (initialSelect) populateVariantTypeSelect(initialSelect);
                            
                                // Theo dõi nút Add (data-repeater-create)
                                document.querySelector("[data-repeater-create]")?.addEventListener("click", () => {
                                  setTimeout(() => {
                                    // Lấy tất cả select mới nhất vừa được thêm
                                    const allSelects = document.querySelectorAll(".form-repeater select.select2");
                                    const lastSelect = allSelects[allSelects.length - 1];
                                    populateVariantTypeSelect(lastSelect); // chỉ gán cho cái cuối
                                  }, 50); // nhỏ delay để DOM kịp render
                                });
                              });
                            </script>
                            

                           <!-- /Variants -->
                           <!-- Inventory -->
                           <div class="card mb-6" bis_skin_checked="1">
                              <div class="card-header" bis_skin_checked="1">
                                 <h5 class="card-title mb-0">Inventory</h5>
                              </div>
                              <div class="card-body" bis_skin_checked="1">
                                 <div class="row" bis_skin_checked="1">
                                    <!-- Navigation -->
                                    <div class="col-12 col-md-4 col-xl-5 col-xxl-4 mx-auto card-separator"
                                       bis_skin_checked="1">
                                       <div class="d-flex justify-content-between flex-column mb-4 mb-md-0 pe-md-4"
                                          bis_skin_checked="1">
                                          <div class="nav-align-left" bis_skin_checked="1">
                                             <ul class="nav nav-pills flex-column w-100" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                   <button class="nav-link active waves-effect waves-light"
                                                      data-bs-toggle="tab" data-bs-target="#restock"
                                                      aria-selected="true" role="tab">
                                                      <i class="ri-add-line me-1_5"></i>
                                                      <span class="align-middle">Restock</span>
                                                   </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                   <button class="nav-link waves-effect waves-light"
                                                      data-bs-toggle="tab" data-bs-target="#shipping"
                                                      aria-selected="false" tabindex="-1" role="tab">
                                                      <i class="ri-car-line me-1_5"></i>
                                                      <span class="align-middle">Shipping</span>
                                                   </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                   <button class="nav-link waves-effect waves-light"
                                                      data-bs-toggle="tab" data-bs-target="#global-delivery"
                                                      aria-selected="false" tabindex="-1" role="tab">
                                                      <i class="ri-global-line me-1_5"></i>
                                                      <span class="align-middle">Global
                                                         Delivery</span>
                                                   </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                   <button class="nav-link waves-effect waves-light"
                                                      data-bs-toggle="tab" data-bs-target="#attributes"
                                                      aria-selected="false" tabindex="-1" role="tab">
                                                      <i class="ri-link-m me-1_5"></i>
                                                      <span class="align-middle">Attributes</span>
                                                   </button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                   <button class="nav-link waves-effect waves-light"
                                                      data-bs-toggle="tab" data-bs-target="#advanced"
                                                      aria-selected="false" tabindex="-1" role="tab">
                                                      <i class="ri-lock-unlock-line me-1_5"></i>
                                                      <span class="align-middle">Advanced</span>
                                                   </button>
                                                </li>
                                             </ul>
                                          </div>
                                       </div>
                                    </div>
                                    <!-- /Navigation -->
                                    <!-- Options -->
                                    <div class="col-12 col-md-8 col-xl-7 col-xxl-8 pt-6 pt-md-0" bis_skin_checked="1">
                                       <div class="tab-content p-0 pe-xl-0 ps-md-4" bis_skin_checked="1">
                                          <!-- Restock Tab -->
                                          <div class="tab-pane fade show active" id="restock" role="tabpanel"
                                             bis_skin_checked="1">
                                             <h6 class="text-body">
                                                Options
                                             </h6>
                                             <div class="row mb-4 g-4" bis_skin_checked="1">
                                                <div class="col-12 col-sm-8 col-lg-12 col-xxl-8" bis_skin_checked="1">
                                                   <div bis_skin_checked="1">
                                                      <input type="number" class="form-control form-control-sm"
                                                         id="ecommerce-product-stock" placeholder="Add to Stock"
                                                         name="Add to Stock" aria-label="Add to Stock" />
                                                   </div>
                                                </div>
                                                <div class="col-6 col-sm-4 col-lg-6 col-xxl-4" bis_skin_checked="1">
                                                   <button class="btn btn-primary waves-effect waves-light">
                                                      <i class="ri-check-line ri-16px me-1_5"></i>Confirm
                                                   </button>
                                                </div>
                                             </div>
                                             <div bis_skin_checked="1">
                                                <h6 class="mb-2 fw-normal">
                                                   Product in stock now: 54
                                                </h6>
                                                <h6 class="mb-2 fw-normal">
                                                   Product in transit: 390
                                                </h6>
                                                <h6 class="mb-2 fw-normal">
                                                   Last time restocked: 24th
                                                   June, 2023
                                                </h6>
                                                <h6 class="mb-0 fw-normal">
                                                   Total stock over lifetime:
                                                   2430
                                                </h6>
                                             </div>
                                          </div>
                                          <!-- Shipping Tab -->
                                          <div class="tab-pane fade" id="shipping" role="tabpanel" bis_skin_checked="1">
                                             <h6 class="mb-3 text-body">
                                                Shipping Type
                                             </h6>
                                             <div bis_skin_checked="1">
                                                <div class="form-check mb-4" bis_skin_checked="1">
                                                   <input class="form-check-input" type="radio" name="shippingType"
                                                      id="seller" />
                                                   <label class="form-check-label" for="seller">
                                                      <span class="h6">Fulfilled by
                                                         Seller</span><br />
                                                      <small>You'll be
                                                         responsible for
                                                         product delivery.<br />
                                                         Any damage or delay
                                                         during shipping may
                                                         cost you a Damage
                                                         fee.</small>
                                                   </label>
                                                </div>
                                                <div class="form-check mb-6" bis_skin_checked="1">
                                                   <input class="form-check-input" type="radio" name="shippingType"
                                                      id="companyName" checked="" />
                                                   <label class="form-check-label" for="companyName">
                                                      <span class="h6">Fulfilled by
                                                         Company name
                                                         &nbsp;<span
                                                            class="badge rounded-pill badge-warning bg-label-warning fs-tiny py-1">RECOMMENDED</span></span><br />
                                                      <small>Your product, Our
                                                         responsibility.<br />
                                                         For a measly fee, we
                                                         will handle the
                                                         delivery process for
                                                         you.</small>
                                                   </label>
                                                </div>
                                                <p class="mb-0">
                                                   See our
                                                   <a href="javascript:void(0);">Delivery terms and
                                                      conditions</a>
                                                   for details
                                                </p>
                                             </div>
                                          </div>
                                          <!-- Global Delivery Tab -->
                                          <div class="tab-pane fade" id="global-delivery" role="tabpanel"
                                             bis_skin_checked="1">
                                             <h6 class="mb-3 text-body">
                                                Global Delivery
                                             </h6>
                                             <!-- Worldwide delivery -->
                                             <div class="form-check mb-4" bis_skin_checked="1">
                                                <input class="form-check-input" type="radio" name="globalDel"
                                                   id="worldwide" />
                                                <label class="form-check-label" for="worldwide">
                                                   <span class="h6">Worldwide
                                                      delivery</span><br />
                                                   <small>Only available with
                                                      Shipping method:
                                                      <a href="javascript:void(0);">Fulfilled by
                                                         Company name</a></small>
                                                </label>
                                             </div>
                                             <!-- Global delivery -->
                                             <div class="form-check mb-4" bis_skin_checked="1">
                                                <input class="form-check-input" type="radio" name="globalDel"
                                                   checked="" />
                                                <label class="form-check-label w-75 pe-12 mb-2" for="country-selected">
                                                   <span class="h6">Selected
                                                      Countries</span>
                                                </label>
                                                <div bis_skin_checked="1">
                                                   <input type="text" class="form-control form-control-sm"
                                                      placeholder="Countries" id="country-selected" />
                                                </div>
                                             </div>
                                             <!-- Local delivery -->
                                             <div class="form-check" bis_skin_checked="1">
                                                <input class="form-check-input" type="radio" name="globalDel"
                                                   id="local" />
                                                <label class="form-check-label" for="local">
                                                   <span class="h6">Local delivery</span><br />
                                                   <small>Deliver to your
                                                      country of residence :
                                                      <a href="javascript:void(0);">Change profile
                                                         address</a></small>
                                                </label>
                                             </div>
                                          </div>
                                          <!-- Attributes Tab -->
                                          <div class="tab-pane fade" id="attributes" role="tabpanel"
                                             bis_skin_checked="1">
                                             <h6 class="mb-2 text-body">
                                                Attributes
                                             </h6>
                                             <div bis_skin_checked="1">
                                                <!-- Fragile Product -->
                                                <div class="form-check mb-4" bis_skin_checked="1">
                                                   <input class="form-check-input" type="checkbox" value="fragile"
                                                      id="fragile" />
                                                   <label class="form-check-label" for="fragile">
                                                      <span class="h6 fw-normal">Fragile
                                                         Product</span>
                                                   </label>
                                                </div>
                                                <!-- Biodegradable -->
                                                <div class="form-check mb-4" bis_skin_checked="1">
                                                   <input class="form-check-input" type="checkbox" value="biodegradable"
                                                      id="biodegradable" />
                                                   <label class="form-check-label" for="biodegradable">
                                                      <span class="h6 fw-normal">Biodegradable</span>
                                                   </label>
                                                </div>
                                                <!-- Frozen Product -->
                                                <div class="form-check mb-4" bis_skin_checked="1">
                                                   <input class="form-check-input" type="checkbox" id="frozen"
                                                      value="frozen" checked="" />
                                                   <label class="form-check-label w-75 pe-12 mb-2" for="frozen">
                                                      <span class="h6 fw-normal mb-1">Frozen
                                                         Product</span>
                                                   </label>
                                                   <div bis_skin_checked="1">
                                                      <input type="number" class="form-control form-control-sm"
                                                         placeholder="Max. allowed Temperature" id="temp" />
                                                   </div>
                                                </div>
                                                <!-- Exp Date -->
                                                <div class="form-check" bis_skin_checked="1">
                                                   <input class="form-check-input" type="checkbox" value="expDate"
                                                      id="expDate" checked="" />
                                                   <label class="form-check-label w-75 pe-12 mb-2" for="expDate">
                                                      <span class="h6 fw-normal mb-1">Expiry Date of
                                                         Product</span>
                                                   </label>
                                                   <div bis_skin_checked="1">
                                                      <input type="text"
                                                         class="product-date form-control form-control-sm flatpickr-input"
                                                         id="flatpickr-date" readonly="readonly" />
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                          <!-- /Attributes Tab -->
                                          <!-- Advanced Tab -->
                                          <div class="tab-pane fade" id="advanced" role="tabpanel" bis_skin_checked="1">
                                             <h6 class="mb-3 text-body">
                                                Advanced
                                             </h6>
                                             <div class="row" bis_skin_checked="1">
                                                <!-- Product Id Type -->
                                                <div class="col" bis_skin_checked="1">
                                                   <h6 class="mb-2">
                                                      Product ID Type
                                                   </h6>
                                                   <div bis_skin_checked="1">
                                                      <select id="product-id" class="form-select form-select-sm"
                                                         data-placeholder="ISBN" data-allow-clear="true">
                                                         <option value="ISBN">
                                                            ISBN
                                                         </option>
                                                         <option value="UPC">
                                                            UPC
                                                         </option>
                                                         <option value="EAN">
                                                            EAN
                                                         </option>
                                                         <option value="JAN">
                                                            JAN
                                                         </option>
                                                      </select>
                                                   </div>
                                                </div>
                                                <!-- Product Id -->
                                                <div class="col" bis_skin_checked="1">
                                                   <h6 class="mb-2">
                                                      Product ID
                                                   </h6>
                                                   <div bis_skin_checked="1">
                                                      <input type="number" id="product-id-1"
                                                         class="form-control form-control-sm"
                                                         placeholder="ISBN Number" />
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                          <!-- /Advanced Tab -->
                                       </div>
                                    </div>
                                    <!-- /Options-->
                                 </div>
                              </div>
                           </div>
                           <!-- /Inventory -->
                        </div>
                        <!-- /Second column -->

                        <!-- Second column -->
                        <div class="col-12 col-lg-4" bis_skin_checked="1">
                           <!-- Pricing Card -->
                           <div class="card mb-6" bis_skin_checked="1">
                              <div class="card-header" bis_skin_checked="1">
                                 <h5 class="card-title mb-0">Pricing</h5>
                              </div>
                              <div class="card-body" bis_skin_checked="1">
                                 <!-- Base Price -->
                                 <div class="form-floating form-floating-outline mb-5" bis_skin_checked="1">
                                    <input type="number" class="form-control" id="ecommerce-product-price"
                                       placeholder="Price" name="productPrice" aria-label="Product price" />
                                    <label for="ecommerce-product-price">Best Price</label>
                                 </div>

                                 <!-- Discounted Price -->
                                 <div class="form-floating form-floating-outline mb-5" bis_skin_checked="1">
                                    <input type="number" class="form-control" id="ecommerce-product-discount-price"
                                       placeholder="Discounted Price" name="productDiscountedPrice"
                                       aria-label="Product discounted price" />
                                    <label for="ecommerce-product-discount-price">Discounted Price</label>
                                 </div>
                                 <!-- Charge tax check box -->
                              
                                 <!-- Instock switch -->
                                 
                              </div>
                           </div>
                           <!-- /Pricing Card -->
                           <!-- Organize Card -->
                           <div class="card mb-6" bis_skin_checked="1">
                              <div class="card-header" bis_skin_checked="1">
                                 <h5 class="card-title mb-0">Organize</h5>
                              </div>
                              <div class="card-body" bis_skin_checked="1">
                                 <!-- Category -->
                                 <!-- Category -->
                                 <div class="mb-5 col ecommerce-select2-dropdown d-flex justify-content-between align-items-center">
                                    <div class="w-100 me-4">
                                      <select id="productCategory" name="category" class="form-select form-select-sm" data-placeholder="Select Category">
                                        <option value="">Select Category</option>
                                      </select>
                                    </div>
                                  </div>
                                  
                                  <script>
                                    let hasLoadedCategory = false;
                                  
                                    document.getElementById("productCategory").addEventListener("mousedown", function (e) {
                                      // Gọi API khi select đang ở trạng thái mặc định (value = "")
                                      if (!hasLoadedCategory && this.value === "") {
                                        fetch("http://localhost:8080/api/v1/category")
                                          .then(response => response.json())
                                          .then(data => {
                                            let options = `<option value="">Select Category</option>`;
                                            data.data.forEach(category => {
                                              options += `<option value="${category.id}">${category.name}</option>`;
                                            });
                                  
                                            this.innerHTML = options;
                                            hasLoadedCategory = true;
                                            console.log("✅ Categories loaded on first click.");
                                          })
                                          .catch(error => console.error("❌ Error fetching categories:", error));
                                      }
                                    });
                                  </script>
                                  
                                  

                                 <!-- Collection -->
                                 <div class="mb-5 col ecommerce-select2-dropdown d-flex justify-content-between align-items-center">
                                    <div class="w-100 me-4">
                                      <select id="productCollection" name="collection" class="form-select form-select-sm" data-placeholder="Select Collection">
                                        <option value="">Select Collection</option>
                                      </select>
                                    </div>
                                  </div>
                                  
                                  <script>
                                    let hasLoadedCollection = false;
                                  
                                    document.getElementById("productCollection").addEventListener("mousedown", function (e) {
                                      // Gọi API khi select đang ở trạng thái mặc định (value = "")
                                      if (!hasLoadedCollection && this.value === "") {
                                        fetch("http://localhost:8080/api/v1/collection/list/all")
                                          .then(response => response.json())
                                          .then(data => {
                                            let options = `<option value="">Select Collection</option>`;
                                            data.data.forEach(collection => {
                                              options += `<option value="${collection.id}">${collection.collectionName}</option>`;
                                            });
                                  
                                            this.innerHTML = options;
                                            hasLoadedCollection = true;
                                            console.log("✅ Collections loaded on first click.");
                                          })
                                          .catch(error => console.error("❌ Error fetching collections:", error));
                                      }
                                    });
                                  </script>

                                 <!-- Brand -->
                                 <div class="mb-5 col ecommerce-select2-dropdown d-flex justify-content-between align-items-center">
                                    <div class="w-100 me-4">
                                      <select id="productBrand" name="brand" class="form-select form-select-sm" data-placeholder="Select Brand">
                                        <option value="">Select Brand</option>
                                      </select>
                                    </div>
                                  </div>
                                  
                                  <script>
                                    let hasLoadedBrand = false;
                                  
                                    document.getElementById("productBrand").addEventListener("mousedown", function () {
                                      if (!hasLoadedBrand && this.value === "") {
                                        const selectElement = this;
                                  
                                        fetch("http://localhost:8080/api/v1/brand/list/all")
                                          .then(response => response.json())
                                          .then(data => {
                                            console.log("✅ Data from API:", data);
                                  
                                            let options = `<option value="">Select Brand</option>`;
                                            data.data.forEach(brand => {
                                              options += `<option value="${brand.id}">${brand.name}</option>`;
                                            });
                                  
                                            selectElement.innerHTML = options;
                                            hasLoadedBrand = true;
                                  
                                            console.log("✅ Brands loaded on first click (no Select2).");
                                          })
                                          .catch(error => console.error("❌ Error fetching brands:", error));
                                      }
                                    });
                                  </script>
                                  

                                 <!-- Status -->

                                 <!-- Tags -->
                                 <div class="mb-4" bis_skin_checked="1">
                                    <div class="form-floating form-floating-outline" bis_skin_checked="1">
                                       <tags class="tagify form-control h-auto" tabindex="-1">
                                          <tag title="Normal" contenteditable="false" spellcheck="false" tabindex="-1"
                                             class="tagify__tag tagify--noAnim" value="Normal">
                                             <x title="" class="tagify__tag__removeBtn" role="button"
                                                aria-label="remove tag"></x>
                                             <div bis_skin_checked="1">
                                                <span class="tagify__tag-text">Normal</span>
                                             </div>
                                          </tag>
                                          <tag title="Standard" contenteditable="false" spellcheck="false" tabindex="-1"
                                             class="tagify__tag tagify--noAnim" value="Standard">
                                             <x title="" class="tagify__tag__removeBtn" role="button"
                                                aria-label="remove tag"></x>
                                             <div bis_skin_checked="1">
                                                <span class="tagify__tag-text">Standard</span>
                                             </div>
                                          </tag>
                                          <tag title="Premium" contenteditable="false" spellcheck="false" tabindex="-1"
                                             class="tagify__tag tagify--noAnim" value="Premium">
                                             <x title="" class="tagify__tag__removeBtn" role="button"
                                                aria-label="remove tag"></x>
                                             <div bis_skin_checked="1">
                                                <span class="tagify__tag-text">Premium</span>
                                             </div>
                                          </tag><span contenteditable="" tabindex="0" data-placeholder="​"
                                             aria-placeholder="" class="tagify__input" role="textbox"
                                             aria-autocomplete="both" aria-multiline="false"></span>
                                          ​
                                       </tags><input id="" class="form-control h-auto" name="ecommerce-product-tags"
                                          value="Normal,Standard,Premium" aria-label="Product Tags" tabindex="-1" />
                                       <label for="ecommerce-product-tags">Tags</label>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <!-- /Organize Card -->
                        </div>
                        <!-- /Second column -->
                     </div>
                  </div>
               </div>
               <!-- / Content -->

               <!-- Footer -->
               <footer class="content-footer footer bg-footer-theme">
                  <div class="container-xxl" bis_skin_checked="1">
                     <div
                        class="footer-container d-flex align-items-center justify-content-between py-4 flex-md-row flex-column"
                        bis_skin_checked="1">
                        <div class="text-body mb-2 mb-md-0" bis_skin_checked="1">
                           ©
                           <script>
                              document.write(new Date().getFullYear());
                           </script>
                           2025, made with
                           <span class="text-danger"><i class="tf-icons ri-heart-fill"></i></span>
                           by
                           <a href="https://themeselection.com/" target="_blank" class="footer-link">ThemeSelection</a>
                        </div>
                        <div class="d-none d-lg-inline-block" bis_skin_checked="1">
                           <a href="https://themeselection.com/license/" class="footer-link me-4"
                              target="_blank">License</a>
                           <a href="https://themeselection.com/" target="_blank" class="footer-link me-4">More
                              Themes</a>

                           <a href="https://demos.themeselection.com/materio-bootstrap-html-admin-template/documentation/"
                              target="_blank" class="footer-link me-4">Documentation</a>

                           <a href="https://themeselection.com/support/" target="_blank"
                              class="footer-link d-none d-sm-inline-block">Support</a>
                        </div>
                     </div>
                  </div>
               </footer>
               <!-- / Footer -->

               <div class="content-backdrop fade" bis_skin_checked="1"></div>
            </div>
            <!-- Content wrapper -->
         </div>
         <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle" bis_skin_checked="1"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target" style="
               touch-action: pan-y;
               user-select: none;
               -webkit-user-drag: none;
               -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            " bis_skin_checked="1"></div>
   </div>
   <!-- / Layout wrapper -->


   <!-- Core JS -->
   <!-- build:js assets/vendor/js/core.js -->
   <script src="./assets/js/jquery.js"></script>
   <script src="./assets/js/popper.js"></script>
   <script src="./assets/js/bootstrap.js"></script>
   <script src="./assets/js/node-waves.js"></script>
   <script src="./assets/js/perfect-scrollbar.js"></script>
   <script src="./assets/js/hammer.js"></script>
   <script src="./assets/js/i18n.js"></script>
   <script src="./assets/js/typeahead.js"></script>
   <script src="./assets/js/menu.js"></script>

   <!-- endbuild -->

   <!-- Vendors JS -->
   <script src="./assets/js/katex.js"></script>
   <script src="./assets/js/quill.js"></script>
   <script src="./assets/js/select2.js"></script>
   <script src="./assets/js/dropzone.js"></script>
   <script type="text/javascript" id="" charset="">
      console.log("TS:GTM Worked");
   </script>
   <script src="./assets/js/jquery-repeater.js"></script>
   <script src="./assets/js/flatpickr.js"></script>
   <script src="./assets/js/tagify.js"></script>

   <!-- Main JS -->
   <script src="./assets/js/main.js"></script>

   <!-- Page JS -->
   <script src="./assets/js/AddProduct/app-ecommerce-product-add.js"></script>
   <input type="file" class="dz-hidden-input" accept=".jpg,.jpeg,.png,.gif" tabindex="-1" style="
            visibility: hidden;
            position: absolute;
            top: 0px;
            left: 0px;
            height: 0px;
            width: 0px;
         " />
   <div class="flatpickr-calendar animate" tabindex="-1" bis_skin_checked="1">
      <div class="flatpickr-months" bis_skin_checked="1">
         <span class="flatpickr-prev-month"><svg version="1.1" xmlns="http://www.w3.org/2000/svg"
               xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 17 17">
               <g></g>
               <path d="M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z"></path>
            </svg></span>
         <div class="flatpickr-month" bis_skin_checked="1">
            <div class="flatpickr-current-month" bis_skin_checked="1">
               <span class="cur-month">March </span>
               <div class="numInputWrapper" bis_skin_checked="1">
                  <input class="numInput cur-year" type="number" tabindex="-1" aria-label="Year" /><span
                     class="arrowUp"></span><span class="arrowDown"></span>
               </div>
            </div>
         </div>
         <span class="flatpickr-next-month"><svg version="1.1" xmlns="http://www.w3.org/2000/svg"
               xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 17 17">
               <g></g>
               <path d="M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z"></path>
            </svg></span>
      </div>
      <div class="flatpickr-innerContainer" bis_skin_checked="1">
         <div class="flatpickr-rContainer" bis_skin_checked="1">
            <div class="flatpickr-weekdays" bis_skin_checked="1">
               <div class="flatpickr-weekdaycontainer" bis_skin_checked="1">
                  <span class="flatpickr-weekday"> Sun</span><span class="flatpickr-weekday">Mon</span><span
                     class="flatpickr-weekday">Tue</span><span class="flatpickr-weekday">Wed</span><span
                     class="flatpickr-weekday">Thu</span><span class="flatpickr-weekday">Fri</span><span
                     class="flatpickr-weekday">Sat </span>
               </div>
            </div>
            <div class="flatpickr-days" tabindex="-1" bis_skin_checked="1">
               <div class="dayContainer" bis_skin_checked="1">
                  <span class="flatpickr-day prevMonthDay" aria-label="February 23, 2025" tabindex="-1">23</span><span
                     class="flatpickr-day prevMonthDay" aria-label="February 24, 2025" tabindex="-1">24</span><span
                     class="flatpickr-day prevMonthDay" aria-label="February 25, 2025" tabindex="-1">25</span><span
                     class="flatpickr-day prevMonthDay" aria-label="February 26, 2025" tabindex="-1">26</span><span
                     class="flatpickr-day prevMonthDay" aria-label="February 27, 2025" tabindex="-1">27</span><span
                     class="flatpickr-day prevMonthDay" aria-label="February 28, 2025" tabindex="-1">28</span><span
                     class="flatpickr-day" aria-label="March 1, 2025" tabindex="-1">1</span><span class="flatpickr-day"
                     aria-label="March 2, 2025" tabindex="-1">2</span><span class="flatpickr-day"
                     aria-label="March 3, 2025" tabindex="-1">3</span><span class="flatpickr-day"
                     aria-label="March 4, 2025" tabindex="-1">4</span><span class="flatpickr-day"
                     aria-label="March 5, 2025" tabindex="-1">5</span><span class="flatpickr-day"
                     aria-label="March 6, 2025" tabindex="-1">6</span><span class="flatpickr-day"
                     aria-label="March 7, 2025" tabindex="-1">7</span><span class="flatpickr-day"
                     aria-label="March 8, 2025" tabindex="-1">8</span><span class="flatpickr-day"
                     aria-label="March 9, 2025" tabindex="-1">9</span><span class="flatpickr-day"
                     aria-label="March 10, 2025" tabindex="-1">10</span><span class="flatpickr-day"
                     aria-label="March 11, 2025" tabindex="-1">11</span><span class="flatpickr-day"
                     aria-label="March 12, 2025" tabindex="-1">12</span><span class="flatpickr-day"
                     aria-label="March 13, 2025" tabindex="-1">13</span><span class="flatpickr-day"
                     aria-label="March 14, 2025" tabindex="-1">14</span><span class="flatpickr-day"
                     aria-label="March 15, 2025" tabindex="-1">15</span><span class="flatpickr-day"
                     aria-label="March 16, 2025" tabindex="-1">16</span><span class="flatpickr-day"
                     aria-label="March 17, 2025" tabindex="-1">17</span><span class="flatpickr-day"
                     aria-label="March 18, 2025" tabindex="-1">18</span><span class="flatpickr-day"
                     aria-label="March 19, 2025" tabindex="-1">19</span><span class="flatpickr-day"
                     aria-label="March 20, 2025" tabindex="-1">20</span><span class="flatpickr-day"
                     aria-label="March 21, 2025" tabindex="-1">21</span><span class="flatpickr-day"
                     aria-label="March 22, 2025" tabindex="-1">22</span><span class="flatpickr-day"
                     aria-label="March 23, 2025" tabindex="-1">23</span><span class="flatpickr-day"
                     aria-label="March 24, 2025" tabindex="-1">24</span><span class="flatpickr-day today selected"
                     aria-label="March 25, 2025" aria-current="date" tabindex="-1">25</span><span class="flatpickr-day"
                     aria-label="March 26, 2025" tabindex="-1">26</span><span class="flatpickr-day"
                     aria-label="March 27, 2025" tabindex="-1">27</span><span class="flatpickr-day"
                     aria-label="March 28, 2025" tabindex="-1">28</span><span class="flatpickr-day"
                     aria-label="March 29, 2025" tabindex="-1">29</span><span class="flatpickr-day"
                     aria-label="March 30, 2025" tabindex="-1">30</span><span class="flatpickr-day"
                     aria-label="March 31, 2025" tabindex="-1">31</span><span class="flatpickr-day nextMonthDay"
                     aria-label="April 1, 2025" tabindex="-1">1</span><span class="flatpickr-day nextMonthDay"
                     aria-label="April 2, 2025" tabindex="-1">2</span><span class="flatpickr-day nextMonthDay"
                     aria-label="April 3, 2025" tabindex="-1">3</span><span class="flatpickr-day nextMonthDay"
                     aria-label="April 4, 2025" tabindex="-1">4</span><span class="flatpickr-day nextMonthDay"
                     aria-label="April 5, 2025" tabindex="-1">5</span>
               </div>
            </div>
         </div>
      </div>
   </div>



<script>
   document.addEventListener("DOMContentLoaded", function () {
     const dropzone = Dropzone.forElement("#dropzone-basic");
 
     // 🔹 1. Lấy dữ liệu sản phẩm từ form
     function getProductData() {
       return {
         // Thông tin sản phẩm
         name: document.querySelector("input[name='productTitle']").value,
         sku: document.querySelector("input[name='productSku']").value,
         quantity: parseInt(document.querySelector("input[name='Quantity']").value),
         description: document.querySelector("#ecommerce-category-description .ql-editor").innerText.trim(),
         bestPrice: parseFloat(document.querySelector("input[name='productPrice']").value),
         discountedPrice: parseFloat(document.querySelector("input[name='productDiscountedPrice']").value),

         categories: [{ id: document.querySelector("#productCategory").value }],
         collections: [{ id: document.querySelector("#productCollection").value }],
         brands: [{ id: document.querySelector("#productBrand").value }],
 
         // Biến thể (variants)
         variants: Array.from(document.querySelectorAll("[data-repeater-item]")).map(item => {
           const type = item.querySelector("select.select2.form-select")?.value || "";
           const value = item.querySelector("input.form-control")?.value || "";
           return { type, value };
         })
        
       };
     }
 
     // 🔹 2. Gọi API để tạo sản phẩm
     async function createProduct(productData) {
      console.log("🧾 Final productData gửi lên:", JSON.stringify(productData, null, 2));
       const res = await fetch("http://localhost:8080/api/v1/product", {
         method: "POST",
         headers: { "Content-Type": "application/json" },
         body: JSON.stringify(productData)
       });
       const result = await res.json();
      console.log("📥 Response từ API tạo product:", result);


      if (!result.id) throw new Error("❌ Không nhận được productId!");

     }
 
     // 🔹 3. Upload ảnh lên product đã tạo
     async function uploadProductImages(productId) {
       const acceptedFiles = dropzone.getAcceptedFiles();
       if (acceptedFiles.length === 0) {
         console.warn("⚠️ Không có ảnh nào để upload.");
         return;
       }
 
       const formData = new FormData();
       acceptedFiles.forEach(file => formData.append("images", file));
 
       const res = await fetch(`http://localhost:8080/api/v1/product/${productId}/upload-images`, {
         method: "POST",
         body: formData
       });
 
       const result = await res.json();
       console.log("🖼️ Upload result:", result);
     }
 
     // 🔹 4. Bắt sự kiện khi người dùng bấm nút Publish
     document.querySelector("button[type='submit']").addEventListener("click", async function (e) {
       e.preventDefault();
       try {
         const productData = getProductData();
         console.log("📦 Data sắp gửi:", productData);
         const productId = await createProduct(productData);
         console.log("✅ Product created with ID:", productId);
         await uploadProductImages(productId);
         alert("🎉 Sản phẩm và ảnh đã được đăng thành công!");
       } catch (err) {
         console.error("❌ Lỗi khi xử lý publish:", err);
         alert("Đăng sản phẩm thất bại. Vui lòng thử lại.");
       }
     });
   });
 </script>




    
   <script src="./assets/js/fix-select2.js"></script>
</body>



</html>